{#
    input: '{{ global.siteDomain }}/{{ page.url }}',
    copied: false,
    timeout: null,
    copy () {
        $clipboard(this.input)
        this.copied = true
        clearTimeout(this.timeout)
        this.timeout = setTimeout(() => {
            this.copied = false
        }, 1500)
    }
#}
{% from "components/button.njk" import button %}
{% macro dropdown(label = "") %}
    <div
        x-data="{
            open: false,
            toggle() {
                if (this.open) {
                    return this.close()
                }
                this.$refs.button.focus()
                this.open = true
            },
            close(focusAfter) {
                if (! this.open) return
                this.open = false
                focusAfter && focusAfter.focus()
            },
        }"
        x-id="['dropdown']"
        x-on:keydown.escape.prevent.stop="close($refs.button)"
        x-on:focusin.window="! $refs.panel.contains($event.target) && close()"
        class="relative max-w-fit"
    >
        {{button(
            label=label,
            type='button',
            size='lg',
            attrs={
                "x-ref": "button",
                "@click": "toggle()",
                ":aria-expanded": "open",
                ":aria-controls":"$id('dropdown')"
            })}}
        <ul
            x-ref="panel"
            x-show="open"
            x-on:click.outside="close($refs.button)"
            x-cloak
            :id="$id('dropdown')"
            class="absolute right-0 min-w-max shadow-zine mt-2 gap-[calc(var(--spacing-section-title)/2)] list-disc z-10 bg-white-smoke border border-dark-grey px-5 py-3 outline-none flex flex-col items-start">
            {{ caller() | safe }}
        </ul>
    </div>
{% endmacro %}
