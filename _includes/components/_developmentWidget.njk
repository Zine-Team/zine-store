{# Nested Components ------------------------------------------------------------------------------------------------------------------- #}

{% from "components/dropdown.njk" import dropdown %}
{% from "components/button.njk" import button %}

{# Values ------------------------------------------------------------------------------------------------------------------------------ #}

{% set developmentLinks = [
    { macro: button, props:{label:"Components", type:"link", size:"sm"}, attrs:{href:"/components"} },
    { macro: button, props:{label:"Markdown", type:"link", size:"sm"}, attrs:{href:"/contract"} },
    { macro: button, props:{label:"Testing", type:"link", size:"sm"}, attrs:{href:"/testing"} }
] %}

{% set themeStyles = "gap-1 py-1 pl-2 pr-1 text-sm border-1 border-neutral-lighter bg-surface rounded shadow-zine" %}
{% set expandedStyles = "translate-0!" %}
{% set buttonProps = {
    size: "sm",
    variant: ""
} %}

{# Macro ------------------------------------------------------------------------------------------------------------------------------- #}
<div x-data="{
        expanded: false,
        windowWidth: window.innerWidth,
        getWidth() {
            window.addEventListener('resize', () => {
                this.windowWidth = window.innerWidth
            })
        }
    }"
    x-init="getWidth"
    :class="expanded && 'translate-0!'"
    class="fixed print:hidden left-0 bottom-1 z-(--z-elevated) -translate-x-[80%] flex items-center transition duration-500 border-l-0 rounded-l-none {{ themeStyles }}">
    <span class="flex w-full mr-1">
        <span class="sm:hidden">Default</span>
        <span class="hidden sm:max-md:block">SM</span>
        <span class="hidden md:max-lg:block">MD</span>
        <span class="hidden lg:max-xl:block">LG</span>
        <span class="hidden xl:block">XL</span>
        <span>&nbsp;â€¢&nbsp;</span>
        <span x-text="windowWidth"></span>
        <span>px</span>
    </span>
    {% if developmentLinks.length > 0 %}
    {{ dropdown(
        props={
            position:["top", "left"],
            dropdownItems: developmentLinks,
            triggerProps:{label: "Dev", icon:"bug_report", type: "button", size:buttonProps.size, variant:buttonProps.variant}
        }
    )}}
    {% endif %}
    {{ button(
        props={
            type: "button",
            size: buttonProps.size,
            variant: buttonProps.variant,
            icon: {off:"chevron_forward", on:"chevron_backward"},
            toggleValue: "expanded",
            tooltip:{off: "Expand widget", on:"Retract widget"}
        },
        attrs={
            @click:"expanded = !expanded"
        }
    ) }}
</div>
