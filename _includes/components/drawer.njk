{#
    Drawer

    @param triggerProps = {} // props for the button component that triggers the dropdown
    @param drawerItems = [] // array of macros (objects) that should be rendered inside the dropdown panel
#}

{% from "components/button.njk" import button %}

{% macro drawer(triggerProps={}, drawerItems=[],attrs={}) %}
    <div
        data-drawer
        x-data="{
            drawerOpen: false,
            toggleDrawer() {
                this.drawerOpen = !this.drawerOpen;
            },

        }"
        class="flex {{ attrs.class }}">

        {% set newProps = {toggleValue:"drawerOpen", label:triggerProps.label, icon:triggerProps.icon, size:triggerProps.size, type:triggerProps.type}  %}
        {{ button(props=newProps, attrs={class:"flex-grow", "@click": "toggleDrawer()"}) }}

        <nav
            x-cloak
            {# @click="drawerOpen = toggleDrawer" #}
            class="absolute left-0 z-10 w-full top-full bg-surface"
            :class="drawerOpen ? 'block' : 'hidden'">
            <ul>
                {% if caller %}
                    {{ caller() | safe }}
                {% else %}
                    {% for item in drawerItems %}
                        <li>{{ item.macro(item.props, item.attrs) }}</li>
                    {% endfor %}
                {% endif %}
            </ul>
        </nav>
    </div>

{% endmacro %}
