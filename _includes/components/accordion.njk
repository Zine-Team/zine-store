{# Nested Components ------------------------------------------------------------------------------------------------------------------- #}

{% from "snippets/loopAttrs.njk" import loopAttrs %}
{% from "components/markdown.njk" import markdown %}

{# Macro ------------------------------------------------------------------------------------------------------------------------------- #}

{% macro accordion(props={}, attrs={}) %}

{# Values ------------------------------------------------------------------------------------------------------------------------------ #}

{% set accordionStyles = "py-item border-b border-neutral-lighter first:-mt-item" %}
{% set summaryStyles = "font-semibold underline-offset-3 decoration-from-font" %}
{% set contentStyles = "pt-item text-sm" %}

<style>
    summary:hover > h2 {
        text-decoration: underline;
    }
    summary::-webkit-details-marker { display: none }
</style>

{# ------------------------------------------------------------------------------------------------------------------------------------- #}

<div data-accordion {{ loopAttrs() }} class="flex flex-col {{attrs.class}}">
    {% for item in props.accordionItems %}
            <details
            {% if item.isOpen %}open{% endif %}
            {{ loopAttrs(item.attrs) }}
            class="w-full flex flex-col group {{ accordionStyles }} {{ item.attrs.class }}">
            <summary class="flex items-center justify-between appearance-none cursor-pointer">
                    <h2 class="{{ summaryStyles }}">{{ item.title }}</h2>
                    <span class="block text-icon group-open:hidden">add</span>
                    <span class="hidden text-icon group-open:block">remove</span>
            </summary>

            {{ markdown({content: item.description, transform: true },{class: contentStyles }) }}

        </details>
    {% endfor %}
</div>

{% endmacro %}

{# Component Documentation ------------------------------------------------------------------------------------------------------------- #}

{% set accordionMeta = {
args: '{{ accordion(
    props={
        accordionItems: [{
            title: "",
            description: "",
            isOpen: false
        }]
    },
    attrs={}
) }}'
} %}
