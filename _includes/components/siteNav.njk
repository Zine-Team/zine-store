{% from "components/button.njk" import button %}
{% from "components/dropdown.njk" import dropdown %}

{% macro siteNav() %}
    <nav class="zine-store-container shrink-0 flex items-baseline justify-between py-nav">
        <span class="flex justify-self-start gap-16">
            {{button(label="Home", href="/", size="lg", type="link")}}
            {% if page.url == "/" %}
                {{button(label="Most recent zines", href="#recentZines", size="lg", type="link", class="hidden lg:flex")}}
                {{button(label="All zines", href="#allZines", size="lg", type="link", class="hidden lg:flex")}}
            {% endif %}
        </span>
        <span class="flex justify-self-end">
            {% if page.url == "/" %}
                {% include "components/submissionDialog.njk" %}
                {# {{button(label="Submit a zine", size="lg", type="button", href=global.submissionHref)}} #}
            {% else %}
                {% call dropdown(label = "Share") %}
                <li class="ml-[1.25ch]">{{button(label="Download PDF", href=pdf, type="link", attrs={download: null})}}</li>
                <li x-data="{
                input: '{{ global.siteDomain }}/{{ page.url }}',
                copied: false,
                timeout: null,
                copy () {
                    $clipboard(this.input)
                    this.copied = true
                    clearTimeout(this.timeout)
                    this.timeout = setTimeout(() => {
                        this.copied = false
                    }, 1500)
                }
            }"
        class="ml-[1.25ch]">
                    {% call button(type = "link", attrs = {
                        "@click": "copy"
                    }) %}
                    <span x-text="copied ? `Copied!` : `Copy link`"></span>
                    {% endcall %}</li>
                {% endcall %}
            {% endif %}
        </span>
    </nav>
{% endmacro %}
