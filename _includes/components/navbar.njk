{# Nested Components ------------------------------------------------------------------------------------------------------------------- #}

{% from "snippets/loopAttrs.njk" import loopAttrs %}
{% from "components/button.njk" import button %}
{% from "components/container.njk" import container %}
{% from "components/drawer.njk" import drawer %}

{# Macro ------------------------------------------------------------------------------------------------------------------------------- #}

{% macro navbar(props={}, attrs={}) %}

{# Values ------------------------------------------------------------------------------------------------------------------------------ #}

{# Theme styles ----------- #}

{% set navbarStyles = " z-(--z-sticky) border-b border-transparent" %}
{% set stickyStyles = "sticky top-0 bg-surface" %}
{% set onScrollStyles = "border-neutral-lighter! border-dotted" %}
{% set itemGap = "gap-x-16 gap-y-2" %}
{% set themeAlignment = "left" %}
{% set drawerOnNarrow = true %}

{% set logo %}
    {{ button({label:"Home", size:"lg", type:"link"},{href:"/"}) }}
{% endset %}

{# Other ------------------ #}

{% set alignment %}{% if props.alignment %}{{ props.alignment }}{% else %}{{ themeAlignment }}{% endif %}{% endset %}

{# ------------------------------------------------------------------------------------------------------------------------------------- #}

<nav
    x-ref="navbar"
    x-data="{
        setNavbarHidden() {
            const currentScrollY = window.scrollY;
            if (currentScrollY > lastScrollY && hasScrolled) {
                navbarHidden = true
            } else if (currentScrollY < lastScrollY + 100  && hasScrolled) {
                navbarHidden = false
            }

            lastScrollY = currentScrollY
        }
    }"
    :class="{'-translate-y-full' : navbarHidden, '{{ onScrollStyles }}' : hasScrolled | !scrollable }"
    @scroll.window="setNavbarHidden()"
    {{ loopAttrs(attrs) }}
    class="w-full transition-transform duration-300 flex flex-col relative {{ attrs.class }} {{ navbarStyles }}
    {% if props.sticky %}{{ stickyStyles }}{% endif %}">

    {% call section({padding: "site"}) %}
        <div class="{%if drawerOnNarrow %}hidden lg:block{% endif %}">
            {% call container({size: "base", type:"flex"},{class:"items-center justify-between py-nav flex"}) %}

                <div data-slot="left"
                class="grow flex items-center justify-start flex-wrap {{ itemGap }}
                {% if alignment === "left" %}{% elseif alignment === "center" %}basis-1/2 shrink{% endif %}">

                    {{ logo | safe }}
                    {{ props.leftSide | safe }}

                </div>

                {% if alignment === "center" %}
                    <div data-slot="center" class="grow flex items-center justify-center flex-wrap shrink-0 {{ itemGap }}">

                        {# Center content #}

                    </div>
                {% endif %}

                <div data-slot="right"
                class="grow flex items-center justify-end flex-wrap {{ itemGap }}
                {% if alignment === "left" %}shrink-0{% endif %}">
                    {{ props.rightSide | safe }}
                </div>

            {% endcall %}
        </div>

        {% if drawerOnNarrow %}
            <div class="lg:hidden">
                {% call container({size: "base", type:"flex"},{class:"items-center justify-between py-nav flex"}) %}
                    {{ logo | safe }}
                    {% if props.leftSide or props.rightSide %}
                        {% call drawer({ alignment:"top", triggerProps:{ icon:{off:"menu", on:"close"}, type:"button", size:"base", tooltip:"Menu"} }) %}
                            {{ props.leftSide | safe }}
                            {{ props.rightSide | safe }}
                        {% endcall %}
                    {% endif %}
                {% endcall %}
            </div>
        {% endif %}
    {% endcall %}
</nav>

{% endmacro %}

{# Component Documentation ------------------------------------------------------------------------------------------------------------- #}

{% set navbarMeta = {
    args: '{% call navbar(
    props={
        input: "",
    },
    attrs={}
) %}
{% endcall %}',
description: "
-
-
-
"
} %}
