{% extends "layouts/document.njk" %}

{# Nested Components ------------------------------------------------------------------------------------------------------------------- #}

{% from "components/button.njk" import button %}
{% from "components/markdown.njk" import markdown %}
{% from "components/container.njk" import container %}
{% from "components/input.njk" import input %}
{% from "components/sidebar.njk" import sidebar %}

{# Values ------------------------------------------------------------------------------------------------------------------------------ #}

{% set anchoredContent = content | attachId | attachAnchor %}

{# ------------------------------------------------------------------------------------------------------------------------------------- #}

{% block pageContent %}
    {% call container({size:"base", type:"sidebar"}) %}
        {% call sidebar() %}
                <section class="flex flex-col items-start gap-item-sm w-full">
                <h2 class="font-semibold">Table of Contents</h2>
                    {{ markdown({content: anchoredContent | toc | safe },{class:"w-full"})}}
            </section>
        {% endcall %}
        <div class="border-dotted overflow-hidden justify-items-center lg:pl-site-inline py-dialog-block lg:border-l border-neutral-lighter">
            <form
                x-data="{
                    hiringPartyName:'',
                    hiringPartyDate:'',
                    cooperativeWorkerName: 'Steph Barkan',
                    cooperativeWorkerDate: new Date().toISOString().slice(0, 10),
                    printContract() {
                        if (this.hiringPartyName && this.hiringPartyDate && this.cooperativeWorkerName && this.cooperativeWorkerDate) {
                            print()
                        } else {
                            console.log('complete!')
                        }
                    }
                }"
                class="max-w-full w-narrow"
                >
                {% call markdown({transform: false}) %}
                    {{ anchoredContent | safe }}
                {% endcall %}
            </form>
        </div>
    {% endcall %}

{% endblock %}
