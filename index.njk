---
layout: default
---
{% from "components/button.njk" import button %}
{% from "components/carousel.njk" import carousel %}
{% from "components/sectionHeader.njk" import sectionHeader %}

{% include "components/siteNav.njk" %}
<main class="flex flex-col items-center gap-section py-section grow w-full">
    <header class="zine-store-container text-pretty flex flex-col gap-10">
        <h1 class="lg:-ml-2 text-2xl flex sm:flex-row justify-between flex-col gap-1 sm:gap-2 items-baseline">
            Zine Store
            <span class="text-xl sm:text-2xl">(Free)</span>
        </h1>
        <p class="text-lg max-w-2xl">{{ global.siteDescription }}</p>
    </header>

    <section id="recentZines" class="zine-store-container flex flex-col gap-section-title">

        {% call sectionHeader({label: "Most recent zines"}) %}
            <div class="hidden sm:block">
                {% for zine in collections.zine | reverse | slice(1) %}
                    Last updated: {{ zine.date | date("MM/dd/yyyy") }}
                {% endfor %}
            </div>
        {% endcall %}

        {% call carousel({},{class:"gap-item-gap"}) %}
            {% for zine in collections.zine | reverse | slice(4) %}
                <a class="shadow-zine w-[70cqi] max-w-[300px] shrink-0" href="{{ zine.url }}">
                    <img class="w-full shadow-page border border-dark-grey" src="{{ global.imagesFolder }}/{{ zine.fileSlug }}/{{ zine.data.pages[0].image }}.jpg" alt="{{ zine.data.title }}"></a>
            {% endfor %}
        {% endcall %}

    </section>

    <section
        id="allZines"
        {% set comma = joiner() %}
        x-data="{
            zines: [{% for zine in collections.zine %} {{ comma() }} '{{ zine.url }}' {% endfor %}],
            chooseRandom () {
                window.location.href = this.zines[Math.floor(Math.random() * this.zines.length)];
            }
        }"
        class="zine-store-container flex flex-col gap-section-title">

        {% call sectionHeader() %}
            <h2 class="text-lg">All zines (A-Z)</h2>
            <div class="hidden xs:block">{{ button({label: "Get a random zine", type: "button"}, {"@click": "chooseRandom", title:"Get a random zine"}) }}</div>
        {% endcall %}
            <ul class="grid gap-x-item-gap gap-y-section-title max-xs:list-disc" style="grid-template-columns: repeat( auto-fill, minmax(200px, 1fr) );">
                {% for zine in collections.zine | sort(false, false, "data.title") %}
                    <li class="flex relative flex-col gap-2 items-start max-w-max max-xs:ml-[1.25ch]">
                        <div class="max-xs:hidden shadow-zine">
                            <img class="w-full shadow-page border border-dark-grey" src="{{ global.imagesFolder }}/{{ zine.fileSlug }}/{{ zine.data.pages[0].image }}.jpg" alt="{{ zine.data.title }}">
                        </div>
                        {% call button({type:"link", href:zine.url, size:"sm"},{class: "text-left scale-none!"}) %}
                            <span class="absolute inset-0"></span>
                            <span>{{ zine.data.title }}</span>
                        {% endcall %}
                    </li>
                {% endfor %}
            </ul>
            {{ button({label: "Read a random zine", type: "button"}, {"@click": "chooseRandom", title:"Read a random zine", class:"xs:hidden"}) }}
    </section>

</main>
